<html lang="en-US" ng-app="TIYAngularApp">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="/js/tiy-ng-controller.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/f205e83315.js"></script>

    <script type="text/javascript">
    $(document).on("click", ".open-deleteNote", function () {
    var noteToDelete = $(this).data('note.id');
    console.log("about to delete the following note" + noteToDelete);
    $("modal-body #noteId").val( noteToDelete );

    });
    </script>
    <style>
    .note-box{
      border-style: solid;
      border-size: 2px;
      border-color: grey;
      margin: auto;
      width: 70%;
      height: 500px;
      border-radius: 10px;
      }

      #topics{
      float:left;
      width: 100%;
      height: 50px;

      }
      .notePreviewTitle{

      }

      #langauges{
      float:left;
      width: 100%;
      height: 50px;

      }
      .space{
       padding-top: 5px;
      }

      .searchparams {
      width: 15%;
      float: left;
      height: 85%;
      border-right:solid grey 2px;
      border-bottom:solid grey 2px;
      padding: 0px; !important

      }
      .notePreviewTitle{


      }
      #note-list{
      overflow-y: scroll;
      width: 85%;
      height: 85%;
      border-bottom:solid grey 2px;
      float: right;
      }

      #button-holder{
      width: 85%;
      float:right;
      height: 15%;
      }

      #topicsthing{
      float:left;
      width:100%;
      }

      #getNote{
      float: right;
      height: 50px;
      margin-top: 13px;
      margin-right: 10px;
      margin-left: 10px;

      }

      #addNote{
      float: right;
      height: 50px;
      margin-top: 13px;
      margin-right: 10px;
      margin-left: 10px;
      }

      #previewNote{
      float: right;
      height: 50px;
      margin-top: 13px;
      margin-right: 10px;
      margin-left: 10px;
      }

      #noteheader{
      text-align: center;
      }
      .note{
      width: 100% !important;
      padding: 0px !important;
      }

      .footer{
       padding-top: 70px;
      }
      .notePreviewCode{
      width:100%;

      }

      #openAddNote{
       float: right;
       height: 50px;
       margin-top: 13px;
       margin-right: 10px;
       margin-left: 10px;
      }

      #delete-note-body{
      height: 200px !important;
      width: 250px !important;
      margin: auto !important;
      }

      #getNotes{
       float: right;
       height: 50px;
       margin-top: 13px;
       margin-right: 10px;
       margin-left: 10px;
      }

      #editNote{
       float: right;
       height: 50px;
       margin-top: 13px;
       margin-right: 10px;
       margin-left: 10px;
      }

      #deleteNote{
       float: left;
       height: 50px;
       margin-top: 13px;
       margin-right: 10px;
       margin-left: 10px;
      }

      #delete-note{
       float: left;
       height: 50px;
       margin-top: 13px;
       margin-right: 10px;
       margin-left: 10px;
      }

      #no-delete-note{
       float: right;
       height: 50px;
       margin-top: 13px;
       margin-right: 10px;
       margin-left: 10px;
       padding-right: 15x;
      }

      .addNoteModal{
        padding-top: 50px !important;
        padding-bottom: 50px !important;

      }
      .editNoteModal{
       padding-top: 50px !important;
       padding-bottom: 50px !important;
      }

      .deleteNoteModal{
       padding-top: 50px !important;
       padding-bottom: 50px !important;

      }

      .notePreviewCollapse{

      }

      .note-form{
       height: 900px !important;

      }

      .edit-note-form{
      height: 900px !important;

      }


      .note-preview{
       height: 700px !important;
      }

      #deleteNoteModal{
       padding-top: 100px !important;
       padding-bottom: 100px !important;
      }

      #pick-topic{
      padding:0px !important;
      width: 100%;
      height: 40px;
      }

      #pick-language{
      padding:0px !important;
      width: 100%;
      height: 40px;
      }
      .space{
      padding-top:15px;
      }

      .note-heading{
      width: 100% !important;
      padding: 0px !important;
      }
      .notes-table-body{
      height: 100px !important;
      width: 100px !important;
      }
      .table-holder{
      background-color:red;
      width: 100%;
      height: 100%;
      }


      .table-fixed thead {
       width: 70%;
      }
      .table-fixed tbody {
       height: 100%;
       overflow-y: auto;
       width: 100%;
      }
      .table-fixed thead, .table-fixed tbody, .table-fixed tr, .table-fixed td, .table-fixed th {
      display: block;
      }
      .table-fixed tbody td, .table-fixed thead > tr> th {
       float: left;
       border-bottom-width: 0;
      }

  </style>
    </head>

<body ng-controller="SampleController">
{{! changing the mustache delimiter so it doesn't conflict with  }}
{{! the default angularjs delimeters - https://mustache.github.io/mustache.5.html for more info  }}
{{=<% %>=}}
<div class="login-logoutbar">

    Welcome, <%user.email%>!

        <form action="/logout" method="post">
            <button type="submit">Logout</button>
        </form>
        <br><br>

</div>


<div class="note-box">

    <div class="container searchparams">

        <div class="dropdown" id="topicsthing">
            <button ng-click="getTags()" class="btn btn-default dropdown-toggle" type="button" id="topics" data-toggle="dropdown">Topics
                <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu" aria-labelledby="topics">
                <li ng-repeat="tag in tags" role="presentation"><a role="menuitem" tabindex="-1" href="#">{{tag.name}}</a></li>
            </ul>
        </div>


        <div class="dropdown">
            <button ng-click="getLanguages()" class="btn btn-default dropdown-toggle" type="button" id="langauges" data-toggle="dropdown"><L>Languages</L>
                <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu" aria-labelledby="langauges">
                <li ng-repeat="language in languages" role="presentation"><a role="menuitem" tabindex="-1" href="#">{{language.language}}</a></li>
            </ul>
        </div>
    </div>

    <div class="container" id="note-list">
     <span ng-repeat="note in notes">
         <div class="panel-group">
             <div class="panel panel-default">
                 <div class="panel-heading">
                     <h4 class="panel-title">
                         <a data-toggle="collapse"style="text-align: center !important;" href="#{{note.id}}">{{note.noteTitle}}</a>
                     </h4>
                 </div>

                 <div class="panel-collapse collapse" id="{{note.id}}">
                     <div class="panel-body">
                         <ul class="list-group">

                             <h4>Notes Title:</h4>
                             <li class="list-group-item">
                                 <div class="container notePreviewTitle">

                                     {{note.noteTitle}}
                                 </div>
                             </li>

                             <h4>Notes Code:</h4>
                             <li class="list-group-item">
                                 <div class="container notePreviewCode">
                                     <code>{{note.noteCode}}

                                     </code>
                                 </div>
                             </li>

                             <h4>Notes Tags:</h4>
                             <li class="list-group-item">
                                 <div ng-repeat="tag in note.tags" class="container notePreviewTags">
                                        {{tag.name}}
                                 </div>
                             </li>

                             <h4>Notes Languages:</h4>
                             <li class="list-group-item">
                                 <div ng-repeat="language in note.languages" class="container notePreviewLanguages">
                                     {{language.language}}

                                 </div>
                             </li>

                             <h4>Notes Text/Comments:</h4>
                             <li class="list-group-item">
                                 <div class="container notePreviewText">
                                     {{note.noteText}}
                                 </div>
                             </li>
                         </ul>
                         <button type="button" class="btn btn-danger btn-lg" data-toggle="modal" ng-click="deleteNoteModal(note.id)" data-target="#deleteNoteModal" id="deleteNote">Delete Note</button>
                         <button type="button" class="btn btn-success btn-lg" data-toggle="modal" ng-click="editNoteModal(note)" data-target="#editNoteModal"  id="editNote">Edit Note</button>
                     </div>
                     <div class="panel-footer">

                     </div>
                 </div>

             </div>
         </div>

     </span>
    </div>

    <div class="container" id="button-holder">
        <button type="button" class="btn btn-success btn-lg" ng-click="getNotes()" id="getNote">Get Notes</button>
        <button type="button" class="btn btn-success btn-lg" data-toggle="modal" data-target="#addNoteModal" id="openAddNote">Add Note</button>
    </div>

    </div>


</div>
<div id="addNoteModal" class="modal fade" role="dialog">
    <div class="modal-dialog addNoteModal">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Create New Note</h4>
            </div>
            <div class="modal-body note-form">
                <form>
                    <div class="form-group">
                    <label for="title"> Title:
                      </label>
                    <input type="text" class="form-control" id="title" ng-model="newNote.noteTitle">
                    </div>

                    <!--<div class="form-group">-->
                    <!--<label for="date"> Date:-->
                    <!--</label>-->
                    <!--<input type="date" class="form-control" id="date" ng-model="newNote.created_at">-->
                    <!--</div>-->

                    <div class="space">
                    </div>

                    <div class="dropdown" id="topic-picker">
                        <button ng-click="getTags()" class="btn btn-default dropdown-toggle" type="button" id="pick-topic" data-toggle="dropdown">Topics
                            <span class="caret"></span></button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="topics">
                            <li ng-repeat="tag in tags" ng-model="newNote.noteTag" role="presentation" ng-click="toggleTopic(tag)">
                                <a role="menuitem" tabindex="-1" href="#">{{tag.name}} <span ng-if="tag.isSelected"> <i class="fa fa-check-square" aria-hidden="true"></i></span></a>
                            </li>
                        </ul>
                    </div>

                    <div class="space">

                    </div>

                    <div>
                        Selected Topics: <span ng-repeat="tag in tags | filter:{isSelected: true}" ng-click="toggleTopic(tag)" > {{tag.name}}&nbsp; <i class="fa fa-check-square"aria-hidden="true"></i></span>
                    </div>

                    <div class="space">
                    </div>

                    <div class="dropdown" id="language-picker">
                        <button ng-click="getLanguages()" class="btn btn-default dropdown-toggle" type="button" id="pick-language" data-toggle="dropdown"><L>Language</L>
                            <span class="caret"></span></button>
                        <ul id="pick-lang-list" class="dropdown-menu" role="menu" aria-labelledby="langauges">
                            <li  ng-repeat="language in languages"  ng-model="newNote.noteLanguage" ng-click="toggleLanguage(language)" role="presentation">
                                <a role="menuitem" tabindex="-1" href="#">{{language.language}} <span ng-if="language.isSelected"> &nbsp; <i class="fa fa-check-square"aria-hidden="true"></i> </span></a>
                            </li>
                        </ul>
                    </div>

                    <div class="space">

                    </div>

                    <div>
                        Selected Languages: <span ng-repeat="language in languages | filter:{isSelected: true}" ng-click="toggleLanguage(language)"  > {{language.language}}&nbsp;<i class="fa fa-check-square"aria-hidden="true"></i> </span>
                    </div>

                    <div class="space">

                    </div>



                    <div class="form-group">
                        <label for="code"> Code:
                        </label>
                        <textarea rows="8" class="form-control" id="code" ng-model="newNote.noteCode"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="text"> Text/Comments:
                        </label>
                        <textarea rows="8" class="form-control" id="text"ng-model="newNote.noteText"></textarea>
                    </div>

                </form>

                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#notePreviewCollapse">Note Preview</a>
                            </h4>
                        </div>

                        <div class="panel-collapse collapse" id="notePreviewCollapse">
                            <div class="panel-body">
                            <ul class="list-group">

                                <h4>Notes Title:</h4>
                                <li class="list-group-item">
                                    <div class="container notePreviewTitle">

                                            {{newNote.noteTitle}}
                                    </div>
                                </li>

                                <h4>Notes Code:</h4>
                                <li class="list-group-item">
                                    <div class="container notePreviewCode">
                                        <code>{{newNote.noteCode}}

                                        </code>
                                    </div>
                                </li>

                                <h4>Notes Tags:</h4>
                                <li class="list-group-item">
                                    <div class="container notePreviewTags">
                                        <span ng-repeat="tag in tags | filter:{isSelected: true}">
                                            {{tag.name}},
                                        </span>
                                    </div>
                                </li>

                                <h4>Notes Languages:</h4>
                                <li class="list-group-item">
                                    <div class="container notePreviewLanguages">
                                        <span ng-repeat="language in languages | filter:{isSelected: true}">
                                            {{language.language}},
                                        </span>
                                    </div>
                                </li>

                                <h4>Notes Text/Comments:</h4>
                                <li class="list-group-item">
                                    <div class="container notePreviewText">
                                            {{newNote.noteText}}
                                    </div>
                                </li>
                            </ul>
                            </div>
                            <div class="panel-footer">Panel Footer</div>
                        </div>

                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <!--<button ng-click="previewNote()" class="btn btn-success" id="previewNote" data-toggle="modal" data-target="#previewNoteModal">Preview Note</button>-->
                <button ng-click="addNote()" class="btn btn-success" data-dismiss="modal" id="addNote" value="Create Notes">Add Note</button>
            </div>

        </div>
        </div>

    </div>


<div id="deleteNoteModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" id="delete-note-body">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
                <h4 class="modal-title" style="text-align: center;">
                    Are You Sure You Want To Delete This Note?
                </h4>
                <div class="modal-body delete-note" ng-note="noteToDelete">
                    <button type="button" class="btn btn-danger btn-lg" data-dismiss="modal" ng-click="deleteNote(noteToDelete)" id="delete-note">Yes</button>
                    <button type="button" class="btn btn-success btn-lg" data-dismiss="modal" id="no-delete-note">No</button>
                </div>
        </div>
    </div>
</div>

<div id="editNoteModal" class="modal fade" role="dialog">
    <div class="modal-dialog editNoteModal">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title" style="text-align:center;">Edit Note</h4>
            </div>
            <div class="modal-body note-form">
                <form>
                    <div class="form-group">
                        <label for="title"> Title:
                        </label>
                        <input type="text" class="form-control" id="title" ng-model="noteToEdit.noteTitle" value="noteToEdit.noteTitle">
                    </div>

                    <div class="space">
                    </div>

                    <div class="dropdown" id="topic-picker">
                        <button ng-click="getTags()" class="btn btn-default dropdown-toggle" type="button" id="topic" data-toggle="dropdown">Topics
                            <span class="caret">

                            </span>
                        </button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="topics">
                            <li ng-repeat="tag in tags" ng-model="noteToEdit.noteTag" role="presentation" ng-click="toggleTopic(tag)">
                                <a role="menuitem" tabindex="-1" href="#">{{tag.name}} <span ng-if="tag.isSelected"> <i class="fa fa-check-square" aria-hidden="true"></i></span></a>
                            </li>
                        </ul>
                    </div>

                    <div class="space">

                    </div>

                    <div>
                        Selected Topics: <span ng-repeat="tag in tags | filter:{isSelected: true}" ng-click="toggleTopic(tag)" > {{tag.name}}&nbsp; <i class="fa fa-check-square"aria-hidden="true"></i></span>
                    </div>

                    <div class="space">
                    </div>

                    <div class="dropdown" id="language-picker">
                        <button ng-click="getLanguages()" class="btn btn-default dropdown-toggle" type="button" id="language" data-toggle="dropdown"><L>Language</L>
                            <span class="caret"></span></button>
                        <ul id="pick-lang-list" class="dropdown-menu" role="menu" aria-labelledby="langauges">
                            <li  ng-repeat="language in languages"  ng-model="noteToEdit.noteLanguage" ng-click="toggleLanguage(language)" role="presentation">
                                <a role="menuitem" tabindex="-1" href="#">{{language.language}} <span ng-if="language.isSelected"> &nbsp; <i class="fa fa-check-square"aria-hidden="true"></i> </span></a>
                            </li>
                        </ul>
                    </div>

                    <div class="space">

                    </div>

                    <div>
                        Selected Languages: <span ng-repeat="language in languages | filter:{isSelected: true}" ng-click="toggleLanguage(language)"  > {{language.language}}&nbsp;<i class="fa fa-check-square"aria-hidden="true"></i> </span>
                    </div>

                    <div class="space">

                    </div>

                    <div class="form-group">
                        <label for="code"> Code:
                        </label>
                        <textarea rows="8" class="form-control" id="code" ng-model="noteToEdit.noteCode" value="noteToEdit.noteCode"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="text"> Text/Comments:
                        </label>
                        <textarea rows="8" class="form-control" id=text" ng-model="noteToEdit.noteText" value="noteToEdit.noteText"></textarea>
                    </div>

                </form>

                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" href="#editNotePreviewCollapse">Note Preview</a>
                            </h4>
                        </div>

                        <div class="panel-collapse collapse" id="editNotePreviewCollapse">
                            <div class="panel-body">
                                <ul class="list-group">

                                    <h4>Notes Title:</h4>
                                    <li class="list-group-item">
                                        <div class="container notePreviewTitle">
                                            {{noteToEdit.noteTitle}}
                                        </div>
                                    </li>

                                    <h4>Notes Code:</h4>
                                    <li class="list-group-item">
                                        <div rows="8" class="container notePreviewCode">
                                            <code>
                                                {{noteToEdit.noteCode}}
                                            </code>
                                        </div>
                                    </li>

                                    <h4>Notes Tags:</h4>
                                    <li class="list-group-item">
                                        <div class="container notePreviewTags">
                                        <span ng-repeat="tag in tags | filter:{isSelected: true}">
                                            {{tag.name}},
                                        </span>
                                        </div>
                                    </li>

                                    <h4>Notes Languages:</h4>
                                    <li class="list-group-item">
                                        <div class="container notePreviewLanguages">
                                        <span ng-repeat="language in languages | filter:{isSelected: true}">
                                            {{language.language}},
                                        </span>
                                        </div>
                                    </li>

                                    <h4>Notes Text/Comments:</h4>
                                    <li class="list-group-item">
                                        <div rows="8" class="container notePreviewText">
                                            {{noteToEdit.noteText}}
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div class="panel-footer">Panel Footer

                            </div>
                        </div>

                    </div>
                </div>


            </div>

            <div class="modal-footer">
                <button ng-click="editNote(noteToEdit.id)" class="btn btn-success" data-dismiss="modal" id="addNote" value="Create Notes">Save Edit</button>
            </div>

        </div>
    </div>
</div>
<div class="footer">

</div>

</body>

</html>